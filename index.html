<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UTH - Đăng nhập / Đăng ký / Quên mật khẩu</title>
  <style>
    body{
      font-family: Arial, sans-serif;
      display:flex;
      justify-content:center;
      align-items:center;
      min-height:100vh;
      background:#f4f4f4;
      margin:0;
      padding:18px;
    }
    .card{
      width:360px;
      background:#fff;
      border-radius:10px;
      box-shadow:0 0 10px rgba(0,0,0,.12);
      padding:22px;
      text-align:center;
    }
    h2{ margin:8px 0 18px; letter-spacing:.5px; }
    .title-blue{ color:#0054a6; }
    .title-red{ color:#e53935; }

    .field{ text-align:left; margin-bottom:12px; }
    .field label{ display:block; font-size:14px; margin-bottom:6px; color:#333; }
    input{
      width:100%;
      padding:10px 12px;
      border:1px solid #ddd;
      border-radius:6px;
      box-sizing:border-box;
      font-size:14px;
      outline:none;
    }
    input:focus{
      border-color:#0054a6;
      box-shadow:0 0 0 3px rgba(0,84,166,.12);
    }

    .actions{ display:flex; gap:10px; margin-top:12px; }
    button{
      flex:1;
      padding:10px;
      border:none;
      border-radius:6px;
      cursor:pointer;
      font-weight:bold;
      font-size:14px;
    }
    .btn-primary{ background:#0054a6; color:#fff; }
    .btn-primary:hover{ background:#004485; }
    .btn-teal{ background:#008b8b; color:#fff; }
    .btn-teal:hover{ background:#007777; }

    .btn-secondary{
      background:#e0e0e0;
      color:#0054a6;
      border:1px solid #d0d0d0;
    }
    .btn-secondary:hover{ background:#d5d5d5; }

    .linkline{
      margin-top:14px;
      font-size:13px;
      color:#666;
    }
    .linkline a{
      color:#e53935;
      font-weight:bold;
      text-decoration:none;
    }
    .linkline a:hover{ text-decoration:underline; }

    .note{
      margin-top:10px;
      font-size:12px;
      color:#777;
      line-height:1.45;
    }

    /* Modal (Đăng ký & Quên mật khẩu) */
    .modal{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.35);
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
    }
    .modal.show{ display:flex; }
    .modal-content{
      width:420px;
      max-width:100%;
      background:#fff;
      border-radius:12px;
      box-shadow:0 10px 30px rgba(0,0,0,.25);
      padding:22px;
      position:relative;
      text-align:center;
    }
    .close{
      position:absolute;
      right:12px;
      top:10px;
      width:34px;
      height:34px;
      border:none;
      border-radius:50%;
      background:#f1f1f1;
      cursor:pointer;
      font-size:18px;
      line-height:34px;
    }
    .close:hover{ background:#e7e7e7; }

    .radio-row{
      display:flex;
      justify-content:center;
      gap:24px;
      margin:8px 0 14px;
      font-size:16px;
    }
    .radio-row label{
      display:flex;
      gap:10px;
      align-items:center;
      cursor:pointer;
      user-select:none;
      color:#333;
    }

    .bottom-link{
      margin-top:14px;
      color:#e53935;
      font-weight:bold;
      cursor:pointer;
      user-select:none;
    }
  </style>
</head>
<body>

  <!-- ====== LOGIN CARD ====== -->
  <div class="card">
    <h2 class="title-blue">ĐĂNG NHẬP UTH</h2>

    <div class="field">
      <label for="loginUser">Tên đăng nhập / Tài khoản</label>
      <input id="loginUser" type="text" placeholder="Nhập tên đăng nhập hoặc tài khoản">
    </div>

    <div class="field">
      <label for="loginPass">Mật khẩu</label>
      <input id="loginPass" type="password" placeholder="Nhập mật khẩu">
    </div>

    <div class="actions">
      <button class="btn-teal" type="button" onclick="handleLogin()">ĐĂNG NHẬP</button>
      <button class="btn-secondary" type="button" onclick="openRegister()">ĐĂNG KÝ</button>
    </div>

    <div class="linkline">
      <a href="#" onclick="openForgot(); return false;">QUÊN MẬT KHẨU?</a>
    </div>

    <div class="note">Demo giao diện. Bạn có thể nối backend/DB sau.</div>
  </div>

  <!-- ====== MODAL ĐĂNG KÝ ====== -->
  <div class="modal" id="registerModal" aria-hidden="true">
    <div class="modal-content">
      <button class="close" type="button" onclick="closeRegister()" aria-label="Đóng">×</button>
      <h2 class="title-blue">ĐĂNG KÝ TÀI KHOẢN</h2>

      <div class="field">
        <label for="rUsername">Tên đăng nhập</label>
        <input id="rUsername" type="text" placeholder="VD: khanhvy">
      </div>

      <div class="field">
        <label for="rAccount">Tài khoản</label>
        <input id="rAccount" type="text" placeholder="VD: uth12345">
      </div>

      <div class="field">
        <label for="rPassword">Mật khẩu</label>
        <input id="rPassword" type="password" placeholder="Nhập mật khẩu">
      </div>

      <div class="field">
        <label for="rPhone">Số điện thoại</label>
        <input id="rPhone" type="tel" placeholder="VD: 0987654321">
      </div>

      <div class="field">
        <label for="rGmail">Gmail</label>
        <input id="rGmail" type="email" placeholder="VD: abc@gmail.com">
      </div>

      <div class="actions">
        <button class="btn-primary" type="button" onclick="handleRegister()">ĐĂNG KÝ</button>
        <button class="btn-secondary" type="button" onclick="closeRegister()">HỦY</button>
      </div>

      <div class="note">Kiểm tra: nhập đủ, SĐT là số, Gmail đúng định dạng.</div>
    </div>
  </div>

  <!-- ====== MODAL QUÊN MẬT KHẨU (KHÔI PHỤC) ====== -->
  <div class="modal" id="forgotModal" aria-hidden="true">
    <div class="modal-content">
      <button class="close" type="button" onclick="closeForgot()" aria-label="Đóng">×</button>
      <h2 class="title-red">KHÔI PHỤC MẬT KHẨU</h2>

      <div class="radio-row">
        <label>
          <input type="radio" name="method" value="phone" checked onchange="updateForgotLabel()">
          <span>Số điện thoại</span>
        </label>
        <label>
          <input type="radio" name="method" value="email" onchange="updateForgotLabel()">
          <span>Email</span>
        </label>
      </div>

      <div class="field">
        <input id="fpAccount" type="text" placeholder="Tài khoản đăng nhập">
      </div>

      <div class="field">
        <input id="fpContact" type="text" placeholder="Số điện thoại">
      </div>

      <button class="btn-teal" type="button" style="width:100%; margin-top:10px;" onclick="handleForgot()">
        LẤY LẠI MẬT KHẨU
      </button>

      <div class="bottom-link" onclick="closeForgot()">ĐĂNG NHẬP</div>
    </div>
  </div>

  <script>
    const registerModal = document.getElementById("registerModal");
    const forgotModal   = document.getElementById("forgotModal");

    function openRegister(){
      registerModal.classList.add("show");
      registerModal.setAttribute("aria-hidden","false");
      document.getElementById("rUsername").focus();
    }
    function closeRegister(){
      registerModal.classList.remove("show");
      registerModal.setAttribute("aria-hidden","true");
    }

    function openForgot(){
      forgotModal.classList.add("show");
      forgotModal.setAttribute("aria-hidden","false");
      document.getElementById("fpAccount").focus();
      updateForgotLabel();
    }
    function closeForgot(){
      forgotModal.classList.remove("show");
      forgotModal.setAttribute("aria-hidden","true");
    }

    // click outside to close
    [registerModal, forgotModal].forEach(modal => {
      modal.addEventListener("click", (e) => {
        if (e.target === modal) modal.classList.remove("show");
      });
    });

    // ESC to close
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        closeRegister();
        closeForgot();
      }
    });

    function getMethod(){
      return document.querySelector('input[name="method"]:checked').value;
    }

    function updateForgotLabel(){
      const method = getMethod();
      const fpContact = document.getElementById("fpContact");
      fpContact.value = "";
      fpContact.placeholder = (method === "phone") ? "Số điện thoại" : "Email";
      fpContact.type = (method === "phone") ? "text" : "email";
    }

    function handleLogin(){
      const user = document.getElementById("loginUser").value.trim();
      const pass = document.getElementById("loginPass").value.trim();
      if(!user || !pass){
        alert("Vui lòng nhập tài khoản và mật khẩu!");
        return;
      }
      alert("Đăng nhập (demo) thành công!\nTài khoản: " + user);
      console.log("LOGIN:", {user, pass});
    }

    function handleRegister(){
      const username = document.getElementById("rUsername").value.trim();
      const account  = document.getElementById("rAccount").value.trim();
      const password = document.getElementById("rPassword").value.trim();
      const phone    = document.getElementById("rPhone").value.trim();
      const gmail    = document.getElementById("rGmail").value.trim();

      if(!username || !account || !password || !phone || !gmail){
        alert("Vui lòng nhập đầy đủ thông tin!");
        return;
      }
      if(!/^\d+$/.test(phone)){
        alert("Số điện thoại chỉ được chứa số!");
        return;
      }
      if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(gmail)){
        alert("Gmail không hợp lệ!");
        return;
      }

      // demo: tự điền lại đăng nhập
      document.getElementById("loginUser").value = username;
      document.getElementById("loginPass").value = password;

      alert("Đăng ký (demo) thành công! Đã tự điền lại để đăng nhập.");
      console.log("REGISTER:", {username, account, password, phone, gmail});
      closeRegister();
    }

    function handleForgot(){
      const acc = document.getElementById("fpAccount").value.trim();
      const contact = document.getElementById("fpContact").value.trim();
      const method = getMethod();

      if(!acc){
        alert("Vui lòng nhập tài khoản đăng nhập!");
        return;
      }
      if(!contact){
        alert("Vui lòng nhập " + (method === "phone" ? "số điện thoại" : "email") + "!");
        return;
      }

      if(method === "phone"){
        if(!/^\d+$/.test(contact)){
          alert("Số điện thoại chỉ được chứa số!");
          return;
        }
        alert("Đã gửi hướng dẫn/mã khôi phục qua SĐT (demo).");
      }else{
        if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(contact)){
          alert("Email không hợp lệ!");
          return;
        }
        alert("Đã gửi hướng dẫn khôi phục qua Email (demo).");
      }

      console.log("FORGOT:", {acc, method, contact});
      closeForgot();
    }
  </script>
</body>
</html>
